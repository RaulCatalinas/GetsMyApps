---
import { Image } from 'astro:assets'

interface Props {
  logoURL: string
  alternativeText: string
  index?: number
  eagerCount?: number
  mobileEagerCount?: number
}

const {
  logoURL,
  alternativeText,
  index = 0,
  eagerCount = 2, // Desktop: 4 imágenes (2x2 grid)
  mobileEagerCount = 1
} = Astro.props

// Detectar móvil desde el User-Agent
const userAgent = Astro.request.headers.get('user-agent') || ''
const isMobile =
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
    userAgent
  )

// Ajustar eagerCount basado en el dispositivo
const finalEagerCount = isMobile ? mobileEagerCount : eagerCount
const loadingStrategy = index < finalEagerCount ? 'eager' : 'lazy'
---

<div
  data-index={index}
  data-mobile={isMobile}
  data-eager-count={finalEagerCount}
>
  <Image
    src={logoURL}
    alt={alternativeText}
    class="mx-auto m-3 flex items-center justify-center app-logo"
    width="125"
    height="125"
    decoding="async"
    loading={loadingStrategy}
  />
</div>
